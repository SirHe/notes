# JavaScript 中的几个核心概念

作用域链、原型链、this 指向以及函数调用栈
堆栈内存、事件循环、多线程
异步编程（回调、promise、sync await、生成器）、错误传递与捕获

作用域链

作用域链描述的是变量的查找规则。JavaScript 采用的是静态（词法）作用域，作用域链的建立取决于静态声明。

而又因为作用域支持嵌套，所以由内而外，就形成了作用域链。

更具体一点来讲，函数内部的变量访问取决于函数定义的位置，而不是函数调用的位置。

原型链

JavaScript 中对象采用原型继承，每一个对象都有一个 `__proto__` 属性指向其原型对象。通过这个属性连接各个对象，因此形成了原型链。对象某个属性的查找可能会遍历原型链。

函数调用栈

函数的嵌套调用，底层是采用栈的方式来实现的。

this 指向

我们知道普通函数（除了箭头函数），this 默认指向调用方，除非使用 call、apply、bind 等方式改变了 this 指向。

而普通函数（非对象方法），调用方是全局对象（浏览器是 window，node 是 global）

多线程

每个线程维护自己独立的内存空间。当然，在一个进程下的所有线程，父线程可以为他们提供公共内存。

进程之间通信需要走 IPC 或者网络等，而线程之间通信可以直接通过父线程的公共内存。

事件循环

事件循环只是实现了一套调度体系，具体回调函数的相关作用域，与事件循环无关，直接查找作用域链即可。

堆栈内存

线程所使用的内存可以分成两部分：堆内存与栈内存。

疑问

由于闭包导致延长生命周期的栈内存变量，在函数退栈的时候，是如何处理的？

注意

函数里面调用函数，不是作用域嵌套，而是调用栈；函数里面声明函数，才是作用域嵌套。

其实原型链是这里面八杆子打不着的，最无关的一个概念。
